<UserControl x:Class="Owmeta.Display.TeamCompositionPanel"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:Owmeta.Display">
    <!-- Glassmorphism style with semi-transparent background -->
    <Border Background="#BF111827"
            CornerRadius="16"
            Padding="16,9"
            BorderThickness="2"
            x:Name="MainBorder">
        <Border.Effect>
            <DropShadowEffect Color="#000000" BlurRadius="20" ShadowDepth="0" Opacity="0.5"/>
        </Border.Effect>
        <Grid>
            <!-- Compact View (horizontal, single line) -->
            <ItemsControl x:Name="CompactList" Visibility="Collapsed">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <StackPanel Orientation="Horizontal"/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal" Margin="0,0,40,0">
                            <!-- Composition Icon -->
                            <Viewbox Width="48" Height="48" Margin="0,0,12,0">
                                <Path Data="{Binding PathData}"
                                      Stroke="{Binding Color}"
                                      StrokeThickness="2"
                                      Fill="Transparent"
                                      Stretch="Uniform"/>
                            </Viewbox>
                            <!-- Composition Name -->
                            <TextBlock Text="{Binding Name}"
                                     FontSize="28"
                                     FontWeight="SemiBold"
                                     Foreground="{Binding Color}"
                                     VerticalAlignment="Center"
                                     Margin="0,0,16,0"/>
                            <!-- Score dots -->
                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                <ItemsControl ItemsSource="{Binding GoodHeroes}">
                                    <ItemsControl.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <StackPanel Orientation="Horizontal"/>
                                        </ItemsPanelTemplate>
                                    </ItemsControl.ItemsPanel>
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <Ellipse Width="16" Height="16" Fill="#22C55E" Margin="2,0"/>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                                <ItemsControl ItemsSource="{Binding NeutralHeroes}">
                                    <ItemsControl.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <StackPanel Orientation="Horizontal"/>
                                        </ItemsPanelTemplate>
                                    </ItemsControl.ItemsPanel>
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <Ellipse Width="16" Height="16" Fill="#EAB308" Margin="2,0"/>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                                <ItemsControl ItemsSource="{Binding BadHeroes}">
                                    <ItemsControl.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <StackPanel Orientation="Horizontal"/>
                                        </ItemsPanelTemplate>
                                    </ItemsControl.ItemsPanel>
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <Ellipse Width="16" Height="16" Fill="#EF4444" Margin="2,0"/>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </StackPanel>
                        </StackPanel>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>

            <!-- Full View (vertical, multiple rows) -->
            <ItemsControl x:Name="CompositionList" x:FieldModifier="private" Visibility="Visible">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel />
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <!-- Reduced height from 96 to 82 (about 15% smaller) -->
                    <Grid Margin="0,0,0,9" Height="82">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="267"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <!-- Composition Type with Icon -->
                        <StackPanel Grid.Column="0" 
                                  Orientation="Horizontal" 
                                  VerticalAlignment="Center"
                                  Margin="16,0,0,0">
                            <Viewbox Width="48" Height="48" Margin="0,0,12,0">
                                <Path Data="{Binding PathData}"
                                      Stroke="{Binding Color}"
                                      StrokeThickness="2"
                                      Fill="Transparent"
                                      Stretch="Uniform"/>
                            </Viewbox>
                            <!-- Reduced font size from 24 to 20 -->
                            <TextBlock Text="{Binding Name}"
                                     FontSize="20"
                                     FontWeight="SemiBold"
                                     Foreground="{Binding Color}"
                                     VerticalAlignment="Center"/>
                        </StackPanel>

                        <!-- Heroes -->
                        <StackPanel Grid.Column="1" 
                                  Orientation="Horizontal" 
                                  VerticalAlignment="Center"
                                  Margin="0,0,32,0">
                            <!-- Good Heroes -->
                            <StackPanel Orientation="Horizontal" 
                                      Visibility="{Binding HasGoodHeroes}">
                                <!-- Reduced icon size from 32 to 27 -->
                                <Path Data="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"
                                      Fill="#22C55E"
                                      Width="27" Height="27"
                                      Stretch="Uniform"
                                      Margin="0,0,8,0"
                                      VerticalAlignment="Center"/>
                                <ItemsControl ItemsSource="{Binding GoodHeroes}"
                                            VerticalAlignment="Center">
                                    <ItemsControl.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <StackPanel Orientation="Horizontal"/>
                                        </ItemsPanelTemplate>
                                    </ItemsControl.ItemsPanel>
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <!-- Reduced hero image size from 64 to 54 -->
                                            <Image Source="{Binding}"
                                                   Width="54"
                                                   Height="54"
                                                   Margin="5,0"
                                                   RenderOptions.BitmapScalingMode="HighQuality"/>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </StackPanel>

                            <!-- Separator -->
                            <Rectangle Width="21" 
                                     Height="1"
                                     Fill="Transparent"
                                     Visibility="{Binding HasGoodHeroes}"/>

                            <!-- Neutral Heroes -->
                            <StackPanel Orientation="Horizontal" 
                                      Visibility="{Binding HasNeutralHeroes}">
                                <!-- Reduced icon size from 32 to 27 -->
                                <Path Data="M19 13H5v-2h14v2z"
                                      Fill="#EAB308"
                                      Width="27" Height="27"
                                      Stretch="Uniform"
                                      Margin="0,0,8,0"
                                      VerticalAlignment="Center"/>
                                <ItemsControl ItemsSource="{Binding NeutralHeroes}"
                                            VerticalAlignment="Center">
                                    <ItemsControl.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <StackPanel Orientation="Horizontal"/>
                                        </ItemsPanelTemplate>
                                    </ItemsControl.ItemsPanel>
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <!-- Reduced hero image size from 64 to 54 -->
                                            <Image Source="{Binding}"
                                                   Width="54"
                                                   Height="54"
                                                   Margin="5,0"
                                                   RenderOptions.BitmapScalingMode="HighQuality"/>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </StackPanel>

                            <!-- Separator -->
                            <Rectangle Width="21" 
                                     Height="1"
                                     Fill="Transparent"
                                     Visibility="{Binding HasNeutralHeroes}"/>

                            <!-- Bad Heroes -->
                            <StackPanel Orientation="Horizontal" 
                                      Visibility="{Binding HasBadHeroes}">
                                <!-- Reduced icon size from 32 to 27 -->
                                <Path Data="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"
                                      Fill="#EF4444"
                                      Width="27" Height="27"
                                      Stretch="Uniform"
                                      Margin="0,0,8,0"
                                      VerticalAlignment="Center"/>
                                <ItemsControl ItemsSource="{Binding BadHeroes}"
                                            VerticalAlignment="Center">
                                    <ItemsControl.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <StackPanel Orientation="Horizontal"/>
                                        </ItemsPanelTemplate>
                                    </ItemsControl.ItemsPanel>
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <!-- Reduced hero image size from 64 to 54 -->
                                            <Image Source="{Binding}"
                                                   Width="54"
                                                   Height="54"
                                                   Margin="5,0"
                                                   RenderOptions.BitmapScalingMode="HighQuality"/>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </StackPanel>
                        </StackPanel>

                        <!-- Stats as dots -->
                        <StackPanel Grid.Column="2"
                                  Orientation="Horizontal"
                                  VerticalAlignment="Center"
                                  HorizontalAlignment="Right"
                                  Margin="0,0,16,0">
                            <ItemsControl ItemsSource="{Binding GoodHeroes}">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <StackPanel Orientation="Horizontal"/>
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Ellipse Width="16" Height="16" Fill="#22C55E" Margin="2,0"/>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                            <ItemsControl ItemsSource="{Binding NeutralHeroes}">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <StackPanel Orientation="Horizontal"/>
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Ellipse Width="16" Height="16" Fill="#EAB308" Margin="2,0"/>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                            <ItemsControl ItemsSource="{Binding BadHeroes}">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <StackPanel Orientation="Horizontal"/>
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Ellipse Width="16" Height="16" Fill="#EF4444" Margin="2,0"/>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </StackPanel>
                    </Grid>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
        </Grid>
    </Border>
</UserControl>